{{ define "main" }}
<section class="home">
  {{ $paginator := .Paginate (.Site.RegularPages.ByDate.Reverse) }}
  <div class="post-list">
    {{ range $paginator.Pages }}
    <article class="post-card">
      <a class="post-card__link" href="{{ .RelPermalink }}">
        <h2 class="post-card__title">{{ .Title }}</h2>
        <div class="post-card__meta">
          <span class="post-card__date">{{ .Date.Format "2006-01-02" }}</span>
          {{ with .Params.location }}
          <span class="post-card__separator">&middot;</span>
          <span class="post-card__location">{{ . }}</span>
          {{ end }}
        </div>
        {{ with .Params.summary }}
        <p class="post-card__summary">{{ . }}</p>
        {{ else }} {{ with .Summary }}
        <p class="post-card__summary">{{ . }}</p>
        {{ end }} {{ end }}
      </a>
    </article>
    {{ end }}
  </div>
  {{ if gt $paginator.TotalPages 1 }}
  <nav class="pagination" aria-label="Pagination">
    {{ if $paginator.HasPrev }}
    <a class="pagination__nav" href="{{ $paginator.Prev.URL }}"
      >&larr; Newer Posts</a
    >
    {{ else }}
    <span class="pagination__nav pagination__nav--disabled"
      >&larr; Newer Posts</span
    >
    {{ end }}
    <ul class="pagination__pages">
      {{ range $page := $paginator.Pagers }}
      <li>
        {{ if eq $page $paginator }}
        <span class="pagination__page pagination__page--current"
          >{{ $page.PageNumber }}</span
        >
        {{ else }}
        <a class="pagination__page" href="{{ $page.URL }}"
          >{{ $page.PageNumber }}</a
        >
        {{ end }}
      </li>
      {{ end }}
    </ul>
    {{ if $paginator.HasNext }}
    <a class="pagination__nav" href="{{ $paginator.Next.URL }}"
      >Older Posts &rarr;</a
    >
    {{ else }}
    <span class="pagination__nav pagination__nav--disabled"
      >Older Posts &rarr;</span
    >
    {{ end }}
  </nav>
  <p class="pagination__info">
    Page {{ $paginator.PageNumber }} of {{ $paginator.TotalPages }}
  </p>
  {{ end }}
</section>
{{ end }}
